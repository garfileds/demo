webpackJsonp([10],{120:function(e,n,t){"use strict";t.d(n,"b",function(){return i}),t.d(n,"a",function(){return o});var i=t(121),o=(t(122).Promise,t(124),t(125))},123:function(e,n){},126:function(e,n,t){"use strict";function i(e,n){var t=["/userRegister","/userLogin"];return"/home"===e.path&&t.indexOf(n.path)>-1}function o(e,n,t){var i={"/userRegister":"/","/userLogin":"/","/planAdd":["/home","/planDetail"],"/setting":"/home","/pokemen":"/home","/planEdit":"/planDetail","/planDetail":"/home"},o=c()(i),a=n.path,s=e.path,l=[a,s].map(function(e){return e.replace(/^((\/planEdit)|(\/planDetail))\/.+$/,function(e,n){return n})}),p=r()(l,2);a=p[0],s=p[1],o.indexOf(a)>-1&&i[a].indexOf(s)>-1?d.a.commit("changeTransitionName","slide-right"):o.indexOf(s)>-1&&i[s].indexOf(a)>-1?d.a.commit("changeTransitionName","slide-left"):"/"===s?d.a.commit("changeTransitionName",""):d.a.commit("changeTransitionName","slide-up"),u.default.nextTick(function(){t()})}var a=t(53),r=t.n(a),s=t(36),c=t.n(s),u=t(15),l=t(127),d=t(39),p=t(128);u.default.use(l.a);var f=new l.a({mode:"hash",routes:[{path:"/",component:p.a,meta:{keepAlive:!0}},{path:"/userLogin",component:function(){return Promise.all([t.e(0),t.e(7)]).then(t.bind(null,142))},meta:{keepAlive:!0}},{path:"/userRegister",component:function(){return Promise.all([t.e(0),t.e(6)]).then(t.bind(null,143))},meta:{keepAlive:!0}},{path:"/setting",component:function(){return Promise.all([t.e(0),t.e(5)]).then(t.bind(null,144))},meta:{keepAlive:!0}},{path:"/pokemen",component:function(){return Promise.all([t.e(0),t.e(3)]).then(t.bind(null,145))},meta:{keepAlive:!0}},{path:"/home",component:function(){return Promise.all([t.e(0),t.e(2)]).then(t.bind(null,146))},meta:{keepAlive:!0}},{path:"/planAdd",component:function(){return Promise.all([t.e(1),t.e(0)]).then(t.bind(null,147))}},{path:"/planDetail/:id",component:function(){return Promise.all([t.e(0),t.e(4)]).then(t.bind(null,148))}},{path:"/planEdit/:id",component:function(){return Promise.all([t.e(0),t.e(8)]).then(t.bind(null,149))}}]});f.beforeEach(function(e,n,t){i(e,n)&&(d.a.commit("changeCache",!1),u.default.nextTick(function(){d.a.commit("changeCache",!0)})),o(e,n,t)}),n.a=f},128:function(e,n,t){"use strict";function i(e){t(129)}var o=t(57),a=t(135),r=t(21),s=i,c=r(o.a,a.a,!1,s,"data-v-5f3e735a",null);n.a=c.exports},129:function(e,n){},130:function(e,n,t){"use strict";function i(e){t(131)}var o=t(58),a=t(132),r=t(21),s=i,c=r(o.a,a.a,!1,s,"data-v-4f05dc9b",null);n.a=c.exports},131:function(e,n){},132:function(e,n,t){"use strict";var i=function(){var e=this,n=e.$createElement;e._self._c;return e._m(0)},o=[function(){var e=this,n=e.$createElement,i=e._self._c||n;return i("section",[i("div",{staticClass:"stage"},[i("img",{staticClass:"response-img stage__item",attrs:{src:t(59),alt:"多端适用",srcset:t(59)+" 720w, "+t(133)+" 1440w, "+t(134)+" 2048w",sizes:"100vw"}})]),e._v(" "),i("p",{staticClass:"description"},[e._v("随时随地使用...")]),e._v(" "),i("div",{staticClass:"bar"})])}],a={render:i,staticRenderFns:o};n.a=a},133:function(e,n,t){e.exports=t.p+"images/all-devices_medium@2x_5b4c3f7.png"},134:function(e,n,t){e.exports=t.p+"images/all-devices_xlarge@2x_3b7e33c.png"},135:function(e,n,t){"use strict";var i=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("main",{staticClass:"l-wrap"},[t("welcomeSlide",{staticClass:"l-slide"}),e._v(" "),t("section",{staticClass:"c-button-group"},[t("router-link",{staticClass:"c-button l-button--full",attrs:{to:"/userRegister"}},[e._v("创建账户")]),e._v(" "),t("router-link",{staticClass:"c-button l-button--full button--login",attrs:{to:"/userLogin"}},[e._v("登录")])],1)],1)},o=[],a={render:i,staticRenderFns:o};n.a=a},136:function(e,n,t){"use strict";function i(e){t(137)}var o=t(60),a=t(138),r=t(21),s=i,c=r(o.a,a.a,!1,s,"data-v-7e6ca97d",null);n.a=c.exports},137:function(e,n){},138:function(e,n,t){"use strict";var i=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{attrs:{id:"app"},on:{touchstart:e.onTouchstart,touchmove:e.onTouchmove,touchend:e.onTouchend}},[t("transition",{attrs:{name:e.transitionName}},[e.needCache?t("keep-alive",[e.$route.meta.keepAlive?t("router-view",{staticClass:"l-absolute"}):e._e()],1):e._e()],1),e._v(" "),t("transition",{attrs:{name:e.transitionName}},[e.$route.meta.keepAlive?e._e():t("router-view",{staticClass:"l-absolute"})],1),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.loading.isLoading,expression:"loading.isLoading"}],staticClass:"c-loader l-loader"},[e._m(0),e._v(" "),t("p",[e._v(e._s(e.loading.tip))])])],1)},o=[function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"c-loader__content pacman"},[t("div"),e._v(" "),t("div"),e._v(" "),t("div"),e._v(" "),t("div"),e._v(" "),t("div")])}],a={render:i,staticRenderFns:o};n.a=a},39:function(e,n,t){"use strict";function i(){if(!A.length)return void(R=setTimeout(i,D));var e=A.slice(0,1);e.forEach(function(e){var n,t;e.isProcessing=!0,!e.planStr&&(n=c(L.state.plans),t=k()(n,2),e.planStr=t[0],e.commitIdTemp=t[1])}),Object(O.a)(e,o,function(e){var n=void 0;if(e){if(n="sync"===e.type?"error":"warn",console[n]("type: "+e.type+"\nmessage: "+e.message),"sync"===e.type)return}else A.shift();R=setTimeout(i,D)})}function o(e,n,t){var i={update:e.update,remove:e.remove};x.default.http.post(N,{commit_id:j,type:"local",update_info:i}).then(function(i){var o=void 0,a=void 0,s=void 0;if("ok"===i.body.code)e.commitIdTemp!==i.body.commit_id?t({type:"sync",index:n,message:"expected synchronization during local update since accepting ok response"}):(E=e.planStr,j=e.commitIdTemp,t());else if("not synchronized"===i.body.code)return a=i.body.plans,s=r(a,L.state.plans),o=i.body.commit_id,x.default.http.post(N,{type:"global",commit_id:o,update_info:s}).then(function(e){if(200===e.status){var i=c(s),o=k()(i,2),a=o[0],r=o[1];r!==e.body.commit_id?t({type:"sync",index:n,message:"expected synchronization after merge during global update"}):(E=a,j=r,L.commit("coverPlans",s),A=[],t())}},function(){t({type:"network",index:n,message:"bad network during global update"})})},function(){t({type:"network",index:n,message:"bad network during global update"})})}function a(){return{isProcessing:!1,update:{},remove:[]}}function r(e,n){for(var t=[],i=Object(I.a)(e),o=Object(I.a)(n),a=0,r=0,c=i.length,u=o.length;a<c&&r<u;)i[a].id===o[r].id?(s(i[a],o[r]),t.push(i[a]),a++,r++):i[a].id>o[r].id?(t.push(o[r]),r++):(t.push(i[a]),a++);if(a===c){var l;t=(l=t).concat.apply(l,h()(o.slice(r,u)))}else{var d;t=(d=t).concat.apply(d,h()(i.slice(a,c)))}return t}function s(e,n){y()(n).forEach(function(t){Object(S.f)(e[t])?e[t]=n[t]:Object(S.g)(n[t])&&s(e[t],n[t])})}function c(e){var n={_id:"",id:"",title:"",bg_image:"",color:"rgb(255, 204, 51)",progress_color:"#fff",progress:{days:21,start_day:"",done:[],marked:[]},status:"",pokeman_id:"",pokeman_name:"",pokeman_img:"",user_id:""},t="";e.forEach(function(e){var i=f()({},n,e);t+=d()(i)});var i=Object(I.b)(t);return[t,i]}function u(e,n){var t=void 0;if((!A.length||A[A.length-1].isProcessing)&&A.push(a()),t=A[A.length-1],"delete"===e)return t.remove.push(n);var i=t.update[n.planId];i||(i=t.update[n.planId]={}),"update"===e?f()(i,n.updateInfo):"done"===e&&f()(i,{"progress.done":n.done,status:n.status})}var l=t(40),d=t.n(l),p=t(41),f=t.n(p),m=t(80),h=t.n(m),v=t(93),g=t.n(v),b=t(36),y=t.n(b),_=t(53),k=t.n(_),C=t(54),T=t.n(C),x=t(15),w=t(35),P=t(38),S=t(61),I=t(120),O=t(65);x.default.use(w.a),x.default.use(P.a);var A=[],E=void 0,j=void 0,R=0,N="/api/plans",D=500,L=new w.a.Store({state:{needInit:!0,needCache:!0,transitionName:"",plansDoneShow:!1,queueIsRunning:!1,loading:{isLoading:!1,tip:""},plans:[],pokemen:[],user:{}},getters:{plansDone:function(e){return e.plans.filter(function(e){return"done"===e.status})},plansIng:function(e){return e.plans.filter(function(e){return"ing"===e.status})},pokemenCollected:function(e){var n=[],t=!0,i=!1,o=void 0;try{for(var a,r=T()(e.plans);!(t=(a=r.next()).done);t=!0){var s=a.value;"done"===s.status&&n.push(s.pokeman_id)}}catch(e){i=!0,o=e}finally{try{!t&&r.return&&r.return()}finally{if(i)throw o}}return e.pokemen.filter(function(e){return n.indexOf(e.id)>-1})}},mutations:{initPlans:function(e,n){e.plans=n||[],e.needInit=!1,console.log("[done] plan init")},initPokemen:function(e,n){e.pokemen=n||[],console.log("[done] pokemen init")},changePlansDoneShow:function(e,n){e.plansDoneShow=n},changeNeedInit:function(e,n){e.needInit=n},changeLoading:function(e,n){e.loading.isLoading=n.isLoading,e.loading.tip=n.tip||""},changeCache:function(e,n){e.needCache=n},changeTransitionName:function(e,n){e.transitionName=n},coverPlans:function(e,n){e.plans=n||[]},addPlan:function(e,n){e.plans.push(n.plan);var t=c(e.plans),i=k()(t,2);E=i[0],j=i[1]},updatePlan:function(e,n){for(var t=0,i=void 0;t<e.plans.length;){if(e.plans[t].id===n.planId){i=e.plans[t],y()(n.updateInfo).forEach(function(e){i[e]=n.updateInfo[e]});break}t++}u("update",n)},deletePlan:function(e,n){e.plans=e.plans.filter(function(e){return e.id!==n.planId}),u("delete",n.planId)},donePlan:function(e,n){var t=void 0,i=void 0;t=e.plans.filter(function(e){return e.id===n.planId})[0],i=t.progress.done.indexOf(n.day),-1===i?t.progress.done.push(n.day):t.progress.done.splice(i,1),t.progress.done.length===t.progress.marked.length?t.status="done":t.status="ing",u("done",{planId:n.planId,status:t.status,done:t.progress.done})},initUser:function(e,n){e.user.nickname=n.nickname,e.user.email=n.email,e.user.id=n._id},clear:function(e){e.needInit=!0,e.user={},e.plans=[]}},actions:{getPlans:function(e){var n=e.commit;return x.default.http.get("/api/plans").then(function(e){clearTimeout(R);var t=e.body;n("initPlans",t);var i=c(t),o=k()(i,2);E=o[0],j=o[1]})},getPokemen:function(e){var n=e.commit;return x.default.http.get("/api/pokemen").then(function(e){n("initPokemen",e.body)})},syncPlansOnce:function(e,n){g()(e);var t=Object(I.a)(A);A=[a()],Object(O.a)(t,o,n)},stopSyncTimer:function(){clearTimeout(R)},startSyncTimer:function(){i()}}});n.a=L},57:function(e,n,t){"use strict";var i=t(130);n.a={name:"welcome",components:{welcomeSlide:i.a}}},58:function(e,n,t){"use strict";n.a={name:"welcomeSlide"}},59:function(e,n,t){e.exports=t.p+"images/all-devices_medium@1x_963155e.png"},60:function(e,n,t){"use strict";var i=t(62),o=t.n(i),a=t(35);n.a={name:"App",data:function(){return{isRightSlide:!1,startScreenX:0,startScreenY:0}},computed:o()({},Object(a.e)(["loading","plans","needCache","transitionName"])),methods:{onTouchstart:function(e){var n=void 0;1===e.changedTouches.length&&(n=e.changedTouches[0],this.isRightSlide=!1,this.startScreenX=n.screenX,this.startScreenY=n.screenY)},onTouchmove:function(e){1===e.changedTouches.length&&this._isRightSlide(e.changedTouches[0])&&e.preventDefault()},onTouchend:function(e){1===e.changedTouches.length&&this._isRightSlide(e.changedTouches[0])&&this.$router.go(-1)},_isRightSlide:function(e){var n=e.screenX-this.startScreenX,t=Math.abs(e.screenY-this.startScreenY);return n>=50&&n>t}}}},61:function(e,n,t){"use strict";t.d(n,"e",function(){return r}),t.d(n,"c",function(){return s}),t.d(n,"a",function(){return c}),t.d(n,"d",function(){return u}),t.d(n,"b",function(){return d}),t.d(n,"h",function(){return l}),t.d(n,"f",function(){return p}),t.d(n,"g",function(){return f});var i=t(105),o=t.n(i),a=t(40),r=(t.n(a),function(e,n){for(var t=n.parentNode;null!==t;){if(t===e)return!0;t=t.parentNode}return!1}),s=function(e,n){return n=n||"yy/mm/dd",n.replace(/(yy)|(mm)|(dd)/g,function(n,t,i,o){return t?e.getFullYear():i?e.getMonth()+1:o?e.getDate():void 0})},c=function(){var e=["00","33","66","99","CC","FF"],n=void 0,t=void 0,i=void 0,o=e.length-1,a=[];for(n=o;n>=0;n--)for(t=o;t>=0;t--)for(i=o;i>=0;i--)a.push("#"+e[n]+e[t]+e[i]);return a.shift(),a.shift(),a.unshift("#3366CC","#33CC00","#FFFF00","#CC6600","#CC0000"),a},u=function(e,n){var t=n.parentNode,i=document.querySelectorAll(e);for(i=Array.prototype.slice.call(i,0);null!==t;){if(i.indexOf(t)>-1)return t;t=t.parentNode}return!1},l=function(e,n){return n===document.querySelector(e)||u(e,n)},d=function(e,n){"string"==typeof e&&(e=document.querySelector(e)),n=n||"formData";var t=e.elements.length,i=null,o=[],a={},r=void 0,s=void 0,c=void 0,u=void 0,l=void 0;for(c=0;c<t;c++)switch(i=e.elements[c],i.type){case"select-one":case"select-multiple":if(i.name.length)for(u=0,r=i.options.length;u<r;u++)l=i.options[u],l.selected&&(s="",s=l.hasAttribute?l.hasAttribute("value")?l.value:l.text:l.hasAttribute.value.specified?l.value:l.text,a[i.name]=s.trim(),o.push(encodeURIComponent(i.name)+"="+encodeURIComponent(s)));break;case void 0:case"file":case"submit":case"reset":case"button":break;case"radio":case"checkbox":default:i.name.length&&(s=i.value,a[i.name]=s.trim(),o.push(encodeURIComponent(i.name)+"="+encodeURIComponent(s.trim())))}return"formData"===n?o.join("&"):a},p=function(e){if(void 0===e||null===e)return!0;if("function"==typeof e||"number"==typeof e||"boolean"==typeof e||"[object Date]"===Object.prototype.toString.call(e))return!1;if(Array.isArray(e)||"string"==typeof e)return 0===e.length;if("object"===(void 0===e?"undefined":o()(e))){for(var n in e)if(e.hasOwnProperty(n))return!1;return!0}return!1},f=function(e){return"[object Object]"===Object.prototype.toString.call(e)}},63:function(e,n,t){"use strict";function i(e){a.default.http.interceptors.push(function(n,t){var i=this||e.app,o="["+n.method+"] "+n.url,a=r.hasOwnProperty(o);a&&i.$store.commit({type:"changeLoading",isLoading:!0,tip:r[o].tip||""}),t(function(e){return a&&i.$store.commit({type:"changeLoading",isLoading:!1}),401!==e.status||s?e:(s=!0,alert("验证失败，请重新登录。"),i.$router.push("/"))})})}function o(e){a.default.http.headers.common.Authorization=e?"Bearer "+e:""}n.b=i,n.a=o;var a=t(15),r={"[GET] /api/plans":{},"[DELETE] /user/token":{tip:"正在登出，我们会保存你最近的更改..."},"[GET] /api/pokemen":{}},s=!1},65:function(e,n,t){"use strict";function i(e,n,t){!function i(o){o>=e.length?t():e[o]?n(e[o],o,function(e){if(e)return t(e);i(o+1)}):i(o+1)}(0)}n.a=i},66:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=t(67),o=(t.n(i),t(69)),a=(t.n(o),t(15)),r=t(38),s=t(63),c=t(39),u=t(126),l=t(136);a.default.use(r.a),a.default.config.productionTip=!1,a.default.config.devtools=!0,new a.default({el:"#app",render:function(e){return e(l.a)},router:u.a,store:c.a,created:function(){Object(s.b)(u.a)},mounted:function(){document.getElementById("appTemp").style.display="none"}})},67:function(e,n){},69:function(e,n){},72:function(e,n){}},[66]);