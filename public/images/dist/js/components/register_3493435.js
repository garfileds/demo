webpackJsonp([8],{Dj9F:function(t,e,a){"use strict";function r(t){a("qyVg")}Object.defineProperty(e,"__esModule",{value:!0});var i=a("Dd8w"),n=a.n(i),s=a("fZjL"),o=a.n(s),d=a("xUMh"),l=a("NYxO"),c=a("+2L+"),u=a("pumu"),p=function(t,e,a,r){var i=this;i.$http.get("/api/user/emailStatus",{params:{email:i[t]}}).then(function(t){t.body.isUsed?(a(i.validRule.msgAlert)(e.errMsg),r({error:e.errMsg})):r()})},m={name:"userRegister",data:function(){return{nickname:"",email:"",password:"",validRule:{submitEl:"#btnRegister",submitHandler:"submitRegisterHandler",msgAlert:"alert",rules:{nickname:[{pattern:"required",errMsg:"昵称不能为空"}],email:[{pattern:"required",errMsg:"邮箱不能为空"},{pattern:/^([\w-_]+(?:\.[\w-_]+)*)@((?:[a-z0-9]+(?:-[a-zA-Z0-9]+)*)+\.[a-z]{2,6})$/i,errMsg:"请输入有效的邮箱格式哦"},{pattern:p,errMsg:"该邮箱已被注册"}],password:[{pattern:"required",errMsg:"密码不能为空"}]}}}},mounted:function(){var t=this,e=[],a=function(t){return"alert"===t?alert.bind(window):"function"==typeof t?t:void 0},r=function(e,r){var i=void 0;return"required"===e.pattern?i=function(t,e,a,r){this[t].length>0?r():(a(this.validRule.msgAlert)(e.errMsg),r({err:e.errMsg}))}:e.pattern instanceof RegExp?i=function(t,e,a,r){e.pattern.test(this[t])?r():(a(this.validRule.msgAlert)(e.errMsg),r({err:e.errMsg}))}:"function"==typeof e.pattern&&(i=e.pattern),i.bind(t,r,e,a)};o()(this.validRule.rules).forEach(function(a){t.validRule.rules[a].forEach(function(t){var i=r(t,a);return e.push(i)})}),this.$el.querySelector(this.validRule.submitEl).addEventListener("click",function(a){a.preventDefault(),Object(c.a)(e,function(t,e,a){return t(a)},function(e){t[t.validRule.submitHandler](!e)})},!1)},methods:n()({submitRegisterHandler:function(t){var e=this;t&&this.$http.post("/api/user",{nickname:e.nickname,email:e.email,password:e.password}).then(function(t){200===t.status&&e.$http.post("/api/user/token",{email:e.email,password:e.password}).then(function(t){Object(u.a)(t.body.token),e.changeNeedInit(!0),e.initUser(t.body),e.$router.push("/home")})})},navBack:function(){this.$router.go(-1)}},Object(l.d)(["changeNeedInit","initUser"])),components:{kBg:d.a}},f=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("main",[r("kBg"),t._v(" "),r("header",{staticClass:"header l-grid"},[r("span",{staticClass:"l-header__side l-grid__item--15"},[r("img",{staticClass:"response-img",attrs:{src:a("Ic3c"),alt:"返回"},on:{click:t.navBack}})])]),t._v(" "),r("div",{staticClass:"l-wrap content"},[r("section",{staticClass:"c-form"},[t._m(0),t._v(" "),r("form",{staticClass:"c-form__content"},[r("fieldset",{staticClass:"c-form__group"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.nickname,expression:"nickname"}],staticClass:"c-form__input c-form__input--group c-form__input--full",attrs:{type:"text",placeholder:"昵称"},domProps:{value:t.nickname},on:{input:function(e){e.target.composing||(t.nickname=e.target.value)}}}),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"c-form__input c-form__input--group c-form__input--full",attrs:{type:"email",placeholder:"邮箱地址"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"c-form__input c-form__input--group c-form__input--full",attrs:{type:"password",placeholder:"密码"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})])]),t._v(" "),t._m(1)])])],1)},v=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"c-form__title"},[a("p",{staticClass:"font--large"},[t._v("创建账户")]),t._v(" "),a("p",{staticClass:"font--small font--secondary"},[t._v("创建账户，在所有设备上同步你的计划。")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"l-fieldset"},[a("button",{staticClass:"c-button l-button--full",attrs:{id:"btnRegister"}},[t._v("创建账户")])])}],g={render:f,staticRenderFns:v},_=g,h=a("VU/8"),b=r,x=h(m,_,!1,b,"data-v-3308d105",null);e.default=x.exports},hHFT:function(t,e,a){e=t.exports=a("FZ+f")(!1),e.push([t.i,".c-form[data-v-3308d105]{display:block;width:100%}.c-form__group[data-v-3308d105]{border:none}.c-form__title[data-v-3308d105]{text-align:center;padding:1em 0}.c-form__content[data-v-3308d105]{padding:.5em 0 1em}.c-form__input[data-v-3308d105]{padding:.5em .6em;display:inline-block;border:1px solid #ccc;box-shadow:inset 0 1px 3px #ddd;border-radius:4px;vertical-align:middle}.c-form__input--group[data-v-3308d105]{display:block;padding:10px;margin:0 0 -1px;border-radius:0;position:relative;top:-1px}.c-form__input--full[data-v-3308d105]{width:100%}.c-form__input--group[data-v-3308d105]:first-child{top:1px;border-radius:4px 4px 0 0;margin:0}.c-form__input--group[data-v-3308d105]:last-child{top:-2px;border-radius:0 0 4px 4px;margin:0}.c-form__input[data-v-3308d105]:focus{outline:0;border-color:var(--color-dark-primary);z-index:3}.l-fieldset[data-v-3308d105]{padding:.35em .75em .625em}.c-button-group[data-v-3308d105]{padding:0 1em}.c-button[data-v-3308d105]{background:var(--button-primary-fill);border:none;padding:.5em;color:var(--color-white);font-size:1rem;text-align:center}.c-button--success[data-v-3308d105]{background:var(--button-success-fill)}.c-button--small[data-v-3308d105]{font-size:.625em}.l-button--full[data-v-3308d105]{display:inline-block;width:100%}.l-button--full-align[data-v-3308d105]{padding:0 .75em}.l-header__side[data-v-3308d105]{padding:1em;max-width:64px}",""])},qyVg:function(t,e,a){var r=a("hHFT");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a("rjj0")("c6e2396c",r,!0)}});