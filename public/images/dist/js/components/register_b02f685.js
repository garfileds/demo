webpackJsonp([6],{140:function(t,e,r){"use strict";function a(t){r(199)}Object.defineProperty(e,"__esModule",{value:!0});var n=r(165),s=r(200),i=r(21),o=a,l=i(n.a,s.a,!1,o,"data-v-3308d105",null);e.default=l.exports},165:function(t,e,r){"use strict";var a=r(62),n=r.n(a),s=r(36),i=r.n(s),o=r(151),l=r(35),u=r(65),c=r(63),p=function(t,e,r,a){var n=this;n.$http.get("/api/user/emailStatus",{params:{email:n[t]}}).then(function(t){t.body.isUsed?(r(n.validRule.msgAlert)(e.errMsg),a({error:e.errMsg})):a()})};e.a={name:"userRegister",data:function(){return{nickname:"",email:"",password:"",validRule:{submitEl:"#btnRegister",submitHandler:"submitRegisterHandler",msgAlert:"alert",rules:{nickname:[{pattern:"required",errMsg:"昵称不能为空"}],email:[{pattern:"required",errMsg:"邮箱不能为空"},{pattern:/^([\w-_]+(?:\.[\w-_]+)*)@((?:[a-z0-9]+(?:-[a-zA-Z0-9]+)*)+\.[a-z]{2,6})$/i,errMsg:"请输入有效的邮箱格式哦"},{pattern:p,errMsg:"该邮箱已被注册"}],password:[{pattern:"required",errMsg:"密码不能为空"}]}}}},mounted:function(){var t=this,e=[],r=function(t){return"alert"===t?alert.bind(window):"function"==typeof t?t:void 0},a=function(e,a){var n=void 0;return"required"===e.pattern?n=function(t,e,r,a){this[t].length>0?a():(r(this.validRule.msgAlert)(e.errMsg),a({err:e.errMsg}))}:e.pattern instanceof RegExp?n=function(t,e,r,a){e.pattern.test(this[t])?a():(r(this.validRule.msgAlert)(e.errMsg),a({err:e.errMsg}))}:"function"==typeof e.pattern&&(n=e.pattern),n.bind(t,a,e,r)};i()(this.validRule.rules).forEach(function(r){t.validRule.rules[r].forEach(function(t){var n=a(t,r);return e.push(n)})}),this.$el.querySelector(this.validRule.submitEl).addEventListener("click",function(r){r.preventDefault(),Object(u.a)(e,function(t,e,r){return t(r)},function(e){t[t.validRule.submitHandler](!e)})},!1)},methods:n()({submitRegisterHandler:function(t){var e=this;t&&this.$http.post("/api/user",{nickname:e.nickname,email:e.email,password:e.password}).then(function(t){200===t.status&&e.$http.post("/api/user/token",{email:e.email,password:e.password}).then(function(t){Object(c.a)(t.body.token),e.changeNeedInit(!0),e.initUser(t.body),e.$router.push("/home")})})},navBack:function(){this.$router.go(-1)}},Object(l.d)(["changeNeedInit","initUser"])),components:{kBg:o.a}}},199:function(t,e){},200:function(t,e,r){"use strict";var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",[a("kBg"),t._v(" "),a("header",{staticClass:"header l-grid"},[a("span",{staticClass:"l-header__side l-grid__item--15"},[a("img",{staticClass:"response-img",attrs:{src:r(152),alt:"返回"},on:{click:t.navBack}})])]),t._v(" "),a("div",{staticClass:"l-wrap content"},[a("section",{staticClass:"c-form"},[t._m(0),t._v(" "),a("form",{staticClass:"c-form__content"},[a("fieldset",{staticClass:"c-form__group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.nickname,expression:"nickname"}],staticClass:"c-form__input c-form__input--group c-form__input--full",attrs:{type:"text",placeholder:"昵称"},domProps:{value:t.nickname},on:{input:function(e){e.target.composing||(t.nickname=e.target.value)}}}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"c-form__input c-form__input--group c-form__input--full",attrs:{type:"email",placeholder:"邮箱地址"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"c-form__input c-form__input--group c-form__input--full",attrs:{type:"password",placeholder:"密码"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})])]),t._v(" "),t._m(1)])])],1)},n=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"c-form__title"},[r("p",{staticClass:"font--large"},[t._v("创建账户")]),t._v(" "),r("p",{staticClass:"font--small font--secondary"},[t._v("创建账户，在所有设备上同步你的计划。")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"l-fieldset"},[r("button",{staticClass:"c-button l-button--full",attrs:{id:"btnRegister"}},[t._v("创建账户")])])}],s={render:a,staticRenderFns:n};e.a=s}});