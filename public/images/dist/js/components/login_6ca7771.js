webpackJsonp([7],{139:function(t,e,r){"use strict";function n(t){r(195)}Object.defineProperty(e,"__esModule",{value:!0});var a=r(163),i=r(198),s=r(21),o=n,l=s(a.a,i.a,!1,o,"data-v-587a08b0",null);e.default=l.exports},163:function(t,e,r){"use strict";var n=r(62),a=r.n(n),i=r(36),s=r.n(i),o=r(151),l=r(35),u=r(65),c=r(63);e.a={name:"userLogin",data:function(){return{email:"",password:"",validRule:{submitEl:"#btnLogin",submitHandler:"submitLoginHandler",msgAlert:"alert",rules:{email:[{pattern:"required",errMsg:"邮箱不能为空"},{pattern:/^([\w-_]+(?:\.[\w-_]+)*)@((?:[a-z0-9]+(?:-[a-zA-Z0-9]+)*)+\.[a-z]{2,6})$/i,errMsg:"请输入有效的邮箱格式"}],password:[{pattern:"required",errMsg:"密码不能为空"}]}}}},mounted:function(){var t=this,e=[],r=function(t){return"alert"===t?alert.bind(window):"function"==typeof t?t:void 0},n=function(e,n){var a=void 0;return"required"===e.pattern?a=function(t,e,r,n){this[t].length>0?n():(r(this.validRule.msgAlert)(e.errMsg),n({err:e.errMsg}))}:e.pattern instanceof RegExp?a=function(t,e,r,n){e.pattern.test(this[t])?n():(r(this.validRule.msgAlert)(e.errMsg),n({err:e.errMsg}))}:"function"==typeof e.pattern&&(a=e.pattern),a.bind(t,n,e,r)};s()(this.validRule.rules).forEach(function(r){t.validRule.rules[r].forEach(function(t){var a=n(t,r);return e.push(a)})}),this.$el.querySelector(this.validRule.submitEl).addEventListener("click",function(r){r.preventDefault(),Object(u.a)(e,function(t,e,r){return t(r)},function(e){t[t.validRule.submitHandler](!e)})},!1)},methods:a()({submitLoginHandler:function(t){var e=this;t&&this.$http.post("/api/user/token",{email:e.email,password:e.password}).then(function(t){200===t.status&&(Object(c.a)(t.body.token),e.changeNeedInit(!0),e.initUser(t.body),e.$router.push("/home"))},function(){window.alert("用户名或密码不正确")})},navBack:function(){this.$router.go(-1)}},Object(l.d)(["changeNeedInit","initUser"])),components:{kBg:o.a}}},195:function(t,e){},198:function(t,e,r){"use strict";var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("main",[n("kBg"),t._v(" "),n("header",{staticClass:"header l-grid"},[n("div",{staticClass:"l-header__side l-grid__item--15"},[n("img",{staticClass:"response-img",attrs:{src:r(152),alt:"返回"},on:{click:t.navBack}})])]),t._v(" "),n("div",{staticClass:"l-wrap content"},[n("section",{staticClass:"c-form"},[t._m(0),t._v(" "),n("form",{staticClass:"c-form__content"},[n("fieldset",{staticClass:"c-form__group"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"c-form__input c-form__input--group c-form__input--full",attrs:{type:"email",placeholder:"邮箱地址"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"c-form__input c-form__input--group c-form__input--full",attrs:{type:"password",placeholder:"密码"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),t._v(" "),t._m(1)])])])],1)},a=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"c-form__title"},[r("p",{staticClass:"font--large"},[t._v("登录到Up!Up!")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"l-fieldset"},[r("button",{staticClass:"c-button l-button--full",attrs:{id:"btnLogin"}},[t._v("登录")])])}],i={render:n,staticRenderFns:a};e.a=i}});